a = 0
a = (a << 1) | (ai3 ? 1 : 0);
a = (a << 1) | (ai2 ? 1 : 0);
a = (a << 1) | (ai1 ? 1 : 0);
a = (a << 1) | (ai0 ? 1 : 0);

b = 0
b = (b << 1) | (bi3 ? 1 : 0);
b = (b << 1) | (bi2 ? 1 : 0);
b = (b << 1) | (bi1 ? 1 : 0);
b = (b << 1) | (bi0 ? 1 : 0);

sum = a + b + (ci ? 1 : 0);

s0 = (sum & 1) != 0;
sum >>= 1;
s1 = (sum & 1) != 0;
sum >>= 1;
s2 = (sum & 1) != 0;
sum >>= 1;
s3 = (sum & 1) != 0;
sum >>= 1;
co = (sum & 1) != 0;

ao3 = ai3;
ao2 = ai2;
ao1 = ai1;
ao0 = ai0;